<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ä¸€é”®å»æ°´å°</title>
  <meta name="referrer" content="never">
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <link rel="stylesheet" href="./index.css">
</head>
<body>
<br>
<br>
<h2 style="text-align:center">ä¸€é”®å»æ°´å°</h2>
<div class="container" id="index">
  <div class="left">
    <textarea v-model="sourceText" rows="10" style="width:100%" placeholder="è¯·ç²˜è´´æŠ–éŸ³/å¿«æ‰‹(çŸ­é“¾æ¥)/å·¨é‡å¼•æ“ åˆ†äº«é“¾æ¥"></textarea>
    <input type="text" v-model="accessKey" placeholder="è¯·è¾“å…¥æˆæƒç ï¼Œç‰¹å®šipæ®µä¸éœ€è¦å¡«å†™" style="width:300px;">
    <span v-if="msg.show" v-bind:style="{color: msg.color}">{{msg.content}}</span>
    <button v-on:click="transform" type="button" style="float: right;width:70px;">
      <b>è·å–</b>
    </button>
    <div class="alert">
      <hr>
      <p>1. ç›®å‰æ”¯æŒçš„åª’ä½“æ¸ é“ï¼šæŠ–éŸ³ â˜‘ å¿«æ‰‹ â˜‘ å·¨é‡å¼•æ“ â˜‘ã€‚</p>
      <p>2. è¯¥é¡¹ç›®æ‰€æœ‰çš„ä»£ç å…¬å¼€å¯è§ï¼Œæ¬¢è¿æœ‰å…´è¶£çš„åŒå­¦ï¼Œä¸€èµ·å®Œå–„ï¼Œ<a href="https://github.com/wArrest/unwatermark">unwatermark</a>ï¼Œå¦‚æœå¯¹ä½ æœ‰å¸®åŠ©ï¼Œä¸è¦åå•¬ä½ çš„starğŸŒŸã€‚</p>
      <p>3. å¦‚æœä½ æœ‰å®è´µçš„å»ºè®®ï¼šwarrestlc@gmail.comå¯é‚®ç®±ç§ä¿¡æˆ‘ã€‚</p>
      <p>4. å£°æ˜â—ï¸ï¼šè¯¥é¡¹ç›®ä»…ç”¨äºå†…éƒ¨å­¦ä¹ ï¼Œç¦æ­¢ç”¨äºå•†ä¸šç”¨é€”â—â—â—</p>
    </div>
  </div>
  <div class="right">
    <video id="myVideo" width="100%" height="100%" controls="controls">
      <source v-bind:src="realUrl" type="video/mp4"/>
    </video>
  </div>
  <br><br>
  <foot style="text-align:center;">
    <p>Â©2021 By Luis</p>
  </foot>
</div>

</body>
<script>
  var app = new Vue({
    el: '#index',
    data: {
      sourceText: "",
      realUrl: "",
      seen: false,
      accessKey: "",
      msg: {
        show: false,
        color: "red",
        content: ""
      }
    },
    methods: {
      transform: function () {
        var _this = this;
        _this.msg.show = false
        var myVideo = document.getElementById("myVideo")
        axios.post("/api/transform",
                {
                  pwd: _this.accessKey,
                  source_text: _this.sourceText
                }
        ).then(function (response) {
          _this.msg.color = "green"
          _this.msg.content = "è·å–æˆåŠŸï¼"
          myVideo.load();
          _this.realUrl = response.data.list[0];
          _this.msg.show = true
          myVideo.pause();
        }).catch(function (error) {
          _this.msg.color = "red"
          _this.msg.content = "è·å–å¤±è´¥ï¼š" + error.response.data.message
          _this.msg.show = true
        });
      }
    }
  })
</script>
</html>
